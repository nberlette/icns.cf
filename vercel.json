{
  "functions": {
    "api/*.ts": {
      "runtime": "@vercel/node@1.12.1",
      "memory": 512,
      "maxDuration": 10
    }
  },
  "routes": [
    {
      "src": "^/(.*)\\.(svg|png|ico|jpe?g|gif|webp)",
      "headers": {
        "Cache-Control": "public, max-age=604800, s-maxage=31536000, stale-while-revalidate=604800, stale-if-error=604800"
      },
      "continue": true
    },
    {
      "src": "^/((favicon|safari-pinned-tab|apple-touch-icon|logo|favicon-[x0-9]*)\\.(ico|svg|png))",
      "dest": "/$1",
      "continue": false
    },
    {
      "src": "^/(?:(?<color>[^/]+)[/])?(?<name>[^\\.]+)(?:\\.(?<type>svg|png))?[/]?[?]?(?<query>.*)",
      "headers": {
        "Cache-Control": "public, max-age=604800, s-maxage=31536000, stale-while-revalidate=604800, stale-if-error=604800"
      },
      "dest": "/api/render.ts?slug=$name&color=$color&type=$type&$query"
    },
    {
      "src": "^/(?<name>[^-]+)(?:[-](?<color>[^\\.]+))?(?:\\.(?<type>svg|png))?[/]?[?]?(?<query>.*)?",
      "headers": {
        "Cache-Control": "public, max-age=604800, s-maxage=31536000, stale-while-revalidate=604800, stale-if-error=604800"
      },
      "dest": "/api/render.ts?slug=$name&color=$color&type=$type&$query"
    },
    {
      "src": "^/(.*)(?:[?](.*))?",
      "dest": "/api/index.ts?q=$1&$2",
      "headers": {
        "Cache-Control": "public, max-age=600, s-maxage=900, stale-while-revalidate=60, stale-if-error=86400"
      }
    },
    {
      "handle": "filesystem"
    },
    {
      "src": "^/(.*)(?:[?](.*))?",
      "dest": "/index.html",
      "headers": {
        "Content-Type": "text/html;charset=utf-8",
        "Cache-Control": "public, max-age=120, s-maxage=240",
        "x-request-pathname": "$1",
        "x-request-querystr": "$2",
        "x-server-name": "icns.ml"
      },
      "continue": false
    }
  ]
}
